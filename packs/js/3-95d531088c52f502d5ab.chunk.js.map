{"version":3,"file":"js/3-95d531088c52f502d5ab.chunk.js","sources":["webpack:///./app/javascript/components/SignIn.vue","webpack:///./app/javascript/components/SignIn.vue?bbef","webpack:///./app/javascript/components/SignIn.vue?1284","webpack:///./app/javascript/components/SignIn.vue?784c","webpack:///SignIn.vue","webpack:///./app/javascript/components/SignIn.vue?5dec","webpack:///./app/javascript/components/SignIn.vue?b52a","webpack:///./app/javascript/components/SignIn.vue?1ea2"],"sourcesContent":["import { render, staticRenderFns } from \"./SignIn.vue?vue&type=template&id=966533d6&lang=pug&\"\nimport script from \"./SignIn.vue?vue&type=script&lang=js&\"\nexport * from \"./SignIn.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SignIn.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/voz/Workspace/marketplace/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('966533d6')) {\n      api.createRecord('966533d6', component.options)\n    } else {\n      api.reload('966533d6', component.options)\n    }\n    module.hot.accept(\"./SignIn.vue?vue&type=template&id=966533d6&lang=pug&\", function () {\n      api.rerender('966533d6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"app/javascript/components/SignIn.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--8-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--8-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../node_modules/style-loader/index.js??ref--4-0!../../../node_modules/css-loader/dist/cjs.js??ref--4-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--4-2!../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/style-loader/index.js??ref--4-0!../../../node_modules/css-loader/dist/cjs.js??ref--4-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--4-2!../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/pug-plain-loader/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=template&id=966533d6&lang=pug&\"","<template lang=\"pug\">\n  .sign-in\n    .card.shadow.px-4.pt-4.pb-2.sign-in-form\n      b-form(@submit=\"onSubmit\" :class=\"{ isLoading }\")\n        .btn.btn-outline-primary.w-100(\n          v-google-signin-button=\"googleSignInParams.client_id\"\n          @click.native=\"googleIsLoading = true\")\n          | Sign in with Google\n        p.text-center.my-2\n          | or\n\n        b-alert(\n          :show=\"error\"\n          variant=\"danger\")\n          | {{ error }}\n\n        b-form-group(label=\"Email:\" label-for=\"email\")\n          b-form-input#email(\n            :state=\"$v.form.email.$dirty ? !$v.form.email.$error : null\"\n            v-model=\"form.email\" type=\"email\" required=\"\" autofocus=\"\" size=\"is-medium\" placeholder=\"Email\")\n          b-form-invalid-feedback\n            | Please fill this field with a valid email address\n        b-form-group(label=\"Password:\" label-for=\"password\")\n          b-form-input#password(\n            :state=\"$v.form.password.$dirty ? !$v.form.password.$error : null\"\n            v-model=\"form.password\" type=\"password\" required=\"\" password-reveal=\"\" size=\"is-medium\" placeholder=\"Password\")\n          b-form-invalid-feedback\n            | Please use at least 6 characters\n        b-form-group.has-text-left.mt-3\n          b-form-checkbox(v-model=\"form.checked\")\n            | Remember me\n        .text-right.mt-4\n          b-button#btn_sign_up(\n            variant=\"primary\"\n            :class=\"{'is-loading': isLoading, 'is-disabled': isLoading}\"\n            @click=\"onSubmit($event)\")\n            | Sign in\n\n      p.has-text-grey.mt-4\n        router-link(:to=\"{name: 'SignUp'}\") Sign up\n        |   · \n        router-link(:to=\"{name: 'LostPasswordPage'}\") Forgot Password\n        |   · \n        a(href=\"mailto:guillaume@Mawa.io\") Help!\n\n</template>\n\n\n<script>\n\nimport GoogleSignInButton from 'vue-google-signin-button-directive'\nimport { validationMixin } from 'vuelidate'\nimport { required, minLength, email, sameAs } from 'vuelidate/lib/validators'\n\nimport { mapActions } from \"vuex\";\n\nexport default {\n  name: \"SignIn\",\n  directives: {\n    GoogleSignInButton\n  },\n  data() {\n    return {\n      isLoading: false,\n      gdprConcented: false,\n      error: null,\n      redirect: null,\n      form: {\n        pid: '',\n        email: \"\",\n        username: \"\",\n        password: \"\",\n        checked: false\n      },\n      googleIsLoading: false,\n      googleSignInParams: {\n        client_id: '476667578043-0tm7eoufgmi6m961qb2m77hhelj5ksl5.apps.googleusercontent.com',\n        response_type: 'permission'\n      }\n    };\n  },\n  validations: {\n    form: {\n      email: {\n        required,\n        email\n      },\n      password: {\n        required,\n        minLength: minLength(6)\n      },\n    }\n  },\n  created() {\n    this.setLayout('front-layout')\n    this.form.pid = this.$cookie.get('pid')\n  },\n\n  methods: {\n    ...mapActions(['setLayout', 'setUser']),\n\n    onSubmit(evt) {\n      this.$v.form.$touch()\n      if (this.$v.form.$anyError) {\n        console.log(this.$v.form)\n        return\n      }\n\n      this.isLoading = true;\n      evt.preventDefault();\n      this.$auth\n        .login({\n          body: {user: this.form},\n          redirect: this.redirect || { name: \"FrontPage\" },\n          rememberMe: this.form.checked\n        })\n        .then(\n          (res) => {\n            console.log( res.body)\n            this.setUser(res.body.data);\n          },\n          (res) => {\n            console.log({ res })\n            // this.error = res.body.data.message\n            this.error = null;\n\n            this.$bvToast.toast(res.body.data.message, {\n              title: 'Test',\n              variant: 'danger',\n              solid: true\n            })\n            this.isLoading = false;\n          }\n        );\n\n    },\n\n    OnGoogleAuthSuccess(access_token) {\n      this.$store.dispatch(\"setUserFromGoogle\", {\n        access_token,\n        pid: this.form.pid,\n      }).then((res) => {\n        if (!res.userExisted) {\n          this.$mixpanel.alias(res.user.id+'');\n        }\n        this.$store.dispatch(\"setUser\", res.user);\n        this.$auth.user(res.user)\n        this.$auth.token(null, res.token)\n        this.$auth.watch.authenticated = true\n        this.$auth.watch.loaded = true\n        this.googleIsLoading = false;\n        // this.$store.dispatch(\"setLayout\", \"logged-in-layout\");\n        this.$cookie.set('rememberMe', true, 365)\n        // this.$router.push({name: 'Home'})\n        this.$router.push({name: 'FrontPage'})\n      });\n    },\n    OnGoogleAuthFail(error) {\n      console.log(error)\n      this.googleIsLoading = false;\n    }\n  }\n};\n</script>\n\n\n<style lang=\"scss\">\n\n  .sign-in {\n\n    input {\n      font-weight: 300;\n    }\n\n    label:not(.custom-control-label) {\n      text-transform: uppercase;\n      font-weight:    700;\n      font-size:      0.9rem;\n      color:          #636573\n    }\n\n    .isLoading {\n      .was-validated .form-control:valid, .form-control.is-valid {\n        border: 0 none;\n        background-image: none;\n      }\n    }\n\n    p.subtitle {\n      padding-top: 1rem;\n    }\n\n    a {\n      text-decoration: none;\n    }\n\n    .sign-in-form {\n      width:  300px;\n      margin: 100px auto;\n    }\n\n  }\n\n\n</style>\n","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".sign-in input {\\n  font-weight: 300;\\n}\\n.sign-in label:not(.custom-control-label) {\\n  text-transform: uppercase;\\n  font-weight: 700;\\n  font-size: 0.9rem;\\n  color: #636573;\\n}\\n.sign-in .isLoading .was-validated .form-control:valid, .sign-in .isLoading .form-control.is-valid {\\n  border: 0 none;\\n  background-image: none;\\n}\\n.sign-in p.subtitle {\\n  padding-top: 1rem;\\n}\\n.sign-in a {\\n  text-decoration: none;\\n}\\n.sign-in .sign-in-form {\\n  width: 300px;\\n  margin: 100px auto;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/Users/voz/Workspace/marketplace/app/javascript/components/SignIn.vue\"],\"names\":[],\"mappings\":\"AAwKA;EAGI,gBAAgB;AAAA;AAHpB;EAOI,yBAAyB;EACzB,gBAAmB;EACnB,iBAAsB;EACtB,cACF;AAAA;AAXF;EAeM,cAAc;EACd,sBAAsB;AAAA;AAhB5B;EAqBI,iBAAiB;AAAA;AArBrB;EAyBI,qBAAqB;AAAA;AAzBzB;EA6BI,YAAa;EACb,kBAAkB;AAAA\",\"file\":\"SignIn.vue?vue&type=style&index=0&lang=scss&\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.sign-in {\\n\\n  input {\\n    font-weight: 300;\\n  }\\n\\n  label:not(.custom-control-label) {\\n    text-transform: uppercase;\\n    font-weight:    700;\\n    font-size:      0.9rem;\\n    color:          #636573\\n  }\\n\\n  .isLoading {\\n    .was-validated .form-control:valid, .form-control.is-valid {\\n      border: 0 none;\\n      background-image: none;\\n    }\\n  }\\n\\n  p.subtitle {\\n    padding-top: 1rem;\\n  }\\n\\n  a {\\n    text-decoration: none;\\n  }\\n\\n  .sign-in-form {\\n    width:  300px;\\n    margin: 100px auto;\\n  }\\n\\n}\\n\\n\\n\"]}]);\n\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--4-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--4-2!../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=style&index=0&lang=scss&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true,\"sourceMap\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--4-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--4-2!../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=style&index=0&lang=scss&\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--4-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--4-2!../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignIn.vue?vue&type=style&index=0&lang=scss&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"sign-in\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"card shadow px-4 pt-4 pb-2 sign-in-form\" },\n      [\n        _c(\n          \"b-form\",\n          { class: { isLoading: _vm.isLoading }, on: { submit: _vm.onSubmit } },\n          [\n            _c(\n              \"div\",\n              {\n                directives: [\n                  {\n                    name: \"google-signin-button\",\n                    rawName: \"v-google-signin-button\",\n                    value: _vm.googleSignInParams.client_id,\n                    expression: \"googleSignInParams.client_id\"\n                  }\n                ],\n                staticClass: \"btn btn-outline-primary w-100\",\n                nativeOn: {\n                  click: function($event) {\n                    _vm.googleIsLoading = true\n                  }\n                }\n              },\n              [_vm._v(\"Sign in with Google\")]\n            ),\n            _c(\"p\", { staticClass: \"text-center my-2\" }, [_vm._v(\"or\")]),\n            _c(\"b-alert\", { attrs: { show: _vm.error, variant: \"danger\" } }, [\n              _vm._v(_vm._s(_vm.error))\n            ]),\n            _c(\n              \"b-form-group\",\n              { attrs: { label: \"Email:\", \"label-for\": \"email\" } },\n              [\n                _c(\"b-form-input\", {\n                  attrs: {\n                    id: \"email\",\n                    state: _vm.$v.form.email.$dirty\n                      ? !_vm.$v.form.email.$error\n                      : null,\n                    type: \"email\",\n                    required: \"\",\n                    autofocus: \"\",\n                    size: \"is-medium\",\n                    placeholder: \"Email\"\n                  },\n                  model: {\n                    value: _vm.form.email,\n                    callback: function($$v) {\n                      _vm.$set(_vm.form, \"email\", $$v)\n                    },\n                    expression: \"form.email\"\n                  }\n                }),\n                _c(\"b-form-invalid-feedback\", [\n                  _vm._v(\"Please fill this field with a valid email address\")\n                ])\n              ],\n              1\n            ),\n            _c(\n              \"b-form-group\",\n              { attrs: { label: \"Password:\", \"label-for\": \"password\" } },\n              [\n                _c(\"b-form-input\", {\n                  attrs: {\n                    id: \"password\",\n                    state: _vm.$v.form.password.$dirty\n                      ? !_vm.$v.form.password.$error\n                      : null,\n                    type: \"password\",\n                    required: \"\",\n                    \"password-reveal\": \"\",\n                    size: \"is-medium\",\n                    placeholder: \"Password\"\n                  },\n                  model: {\n                    value: _vm.form.password,\n                    callback: function($$v) {\n                      _vm.$set(_vm.form, \"password\", $$v)\n                    },\n                    expression: \"form.password\"\n                  }\n                }),\n                _c(\"b-form-invalid-feedback\", [\n                  _vm._v(\"Please use at least 6 characters\")\n                ])\n              ],\n              1\n            ),\n            _c(\n              \"b-form-group\",\n              { staticClass: \"has-text-left mt-3\" },\n              [\n                _c(\n                  \"b-form-checkbox\",\n                  {\n                    model: {\n                      value: _vm.form.checked,\n                      callback: function($$v) {\n                        _vm.$set(_vm.form, \"checked\", $$v)\n                      },\n                      expression: \"form.checked\"\n                    }\n                  },\n                  [_vm._v(\"Remember me\")]\n                )\n              ],\n              1\n            ),\n            _c(\n              \"div\",\n              { staticClass: \"text-right mt-4\" },\n              [\n                _c(\n                  \"b-button\",\n                  {\n                    class: {\n                      \"is-loading\": _vm.isLoading,\n                      \"is-disabled\": _vm.isLoading\n                    },\n                    attrs: { id: \"btn_sign_up\", variant: \"primary\" },\n                    on: {\n                      click: function($event) {\n                        return _vm.onSubmit($event)\n                      }\n                    }\n                  },\n                  [_vm._v(\"Sign in\")]\n                )\n              ],\n              1\n            )\n          ],\n          1\n        ),\n        _c(\n          \"p\",\n          { staticClass: \"has-text-grey mt-4\" },\n          [\n            _c(\"router-link\", { attrs: { to: { name: \"SignUp\" } } }, [\n              _vm._v(\"Sign up\")\n            ]),\n            _vm._v(\"  · \"),\n            _c(\"router-link\", { attrs: { to: { name: \"LostPasswordPage\" } } }, [\n              _vm._v(\"Forgot Password\")\n            ]),\n            _vm._v(\"  · \"),\n            _c(\"a\", { attrs: { href: \"mailto:guillaume@Mawa.io\" } }, [\n              _vm._v(\"Help!\")\n            ])\n          ],\n          1\n        )\n      ],\n      1\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACvCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkDA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AAFA;AAbA;AAkBA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AADA;AAYA;AACA;AACA;AACA;AAEA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAHA;AAOA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAIA;AACA;AAGA;AAEA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AA9DA;AA1CA;;;;;;;;;;;ACxDA;AACA;AACA;AACA;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}