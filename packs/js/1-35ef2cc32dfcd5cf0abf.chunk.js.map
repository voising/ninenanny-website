{"version":3,"file":"js/1-35ef2cc32dfcd5cf0abf.chunk.js","sources":["webpack:///./app/javascript/components/ui/phone-number-verification.vue","webpack:///./app/javascript/components/ui/phone-number-verification.vue?f595","webpack:///./app/javascript/components/ui/phone-number-verification.vue?cf43","webpack:///./app/javascript/components/ui/phone-number-verification.vue?ff48","webpack:///phone-number-verification.vue","webpack:///./app/javascript/components/ui/phone-number-verification.vue?68c4","webpack:///./app/javascript/components/ui/phone-number-verification.vue?1762","webpack:///./app/javascript/components/ui/phone-number-verification.vue?547c"],"sourcesContent":["import { render, staticRenderFns } from \"./phone-number-verification.vue?vue&type=template&id=48079410&lang=pug&\"\nimport script from \"./phone-number-verification.vue?vue&type=script&lang=js&\"\nexport * from \"./phone-number-verification.vue?vue&type=script&lang=js&\"\nimport style0 from \"./phone-number-verification.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/voz/Workspaces/marketplace-v2/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('48079410')) {\n      api.createRecord('48079410', component.options)\n    } else {\n      api.reload('48079410', component.options)\n    }\n    module.hot.accept(\"./phone-number-verification.vue?vue&type=template&id=48079410&lang=pug&\", function () {\n      api.rerender('48079410', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"app/javascript/components/ui/phone-number-verification.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--8-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-number-verification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--8-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-number-verification.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../node_modules/style-loader/index.js??ref--4-0!../../../../node_modules/css-loader/dist/cjs.js??ref--4-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--4-2!../../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-number-verification.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/style-loader/index.js??ref--4-0!../../../../node_modules/css-loader/dist/cjs.js??ref--4-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--4-2!../../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-number-verification.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/pug-plain-loader/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-number-verification.vue?vue&type=template&id=48079410&lang=pug&\"","<template lang=\"pug\">\n  .ui--phone-number-verification\n    vue-phone-number-input(\n      @input=\"$emit('input', form.phone_number)\"\n      @update=\"updateCountry\"\n      :default-country-code=\"user.phone_country_code || 'HU'\"\n      v-model=\"form.phone_number\"\n    )\n    .text-right(\n      v-if=\"!user.phone_confirmation_sent_at && form.phone_number.length\"\n    )\n      b-button.mt-2.ml-auto(\n        :class=\"{ loading }\"\n        size=\"sm\"\n        @click=\"sendPhoneConfirmationCode\"\n        variant=\"outline-primary\"\n      ) Send verification code by SMS\n    .is-flex.mt-2.valign(\n      v-if=\"user.phone_confirmation_sent_at && form.phone_number.length && !user.phone_confirmed_at\"\n    )\n      label.classic.has-fg-1.text-right.mr-3 Please enter the code\n      .input-group.d-inline-flex.w-50\n        input.form-control(\n          type=\"text\"\n          v-model=\"form.phone_confirmation_code\"\n          placeholder=\"123456\"\n        )\n        .input-group-append\n          b-button(\n            :class=\"{ loading }\"\n            @click=\"confirmCode\"\n            size=\"sm\"\n            variant=\"primary\"\n          ) Send\n\n</template>\n\n<script>\n  import {Verification} from '@/store/models/resources'\n  import {mapGetters, mapActions} from \"vuex\";\n\n  export default {\n    name: \"PhoneNumberVerification\",\n    props: ['value'],\n    data() {\n      return {\n        // UX\n        form: {\n          phone_number: \"\",\n          phone_country_code: \"\",\n          phone_confirmation_code: ''\n        },\n        loading: false,\n      };\n    },\n    computed: mapGetters(['user']),\n    mounted() {\n       this.form = {\n        phone_number: this.value || '',\n        phone_country_code: this.user.phone_country_code,\n        phone_confirmation_code: ''\n      }\n    },\n    methods: {\n      ...mapActions(['setUser', 'updateUser']),\n      confirmCode() {\n        this.loading = true\n        Verification.phoneConfirm({}, {\n          code: this.form.phone_confirmation_code\n        }).then((res) => {\n          this.setUser(res.body.data.attributes)\n          this.$toast.success(\"All good! Your phone number is verified\")\n          this.loading = false\n        })\n      },\n      sendPhoneConfirmationCode() {\n        this.loading = true\n        this.updateUser({\n          ...this.user,\n          phone_number: this.form.phone_number,\n          phone_country_code: this.form.phone_country_code\n        }).then(res => {\n          Verification.phoneConfirmationCode().then((res) => {\n            this.setUser(res.body.data.attributes)\n            this.loading = false\n          })\n        });\n      },\n      updateCountry({countryCode}) {\n        this.phone_country_code = countryCode\n      }\n    },\n  };\n</script>\n\n\n<style lang=\"scss\">\n  .ui--phone-number-verification {\n\n  }\n</style>\n","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"phone-number-verification.vue?vue&type=style&index=0&lang=scss&\"}]);\n\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--4-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--4-2!../../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-number-verification.vue?vue&type=style&index=0&lang=scss&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true,\"sourceMap\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--4-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--4-2!../../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-number-verification.vue?vue&type=style&index=0&lang=scss&\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--4-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--4-2!../../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./phone-number-verification.vue?vue&type=style&index=0&lang=scss&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ui--phone-number-verification\" },\n    [\n      _c(\"vue-phone-number-input\", {\n        attrs: { \"default-country-code\": _vm.user.phone_country_code || \"HU\" },\n        on: {\n          input: function($event) {\n            return _vm.$emit(\"input\", _vm.form.phone_number)\n          },\n          update: _vm.updateCountry\n        },\n        model: {\n          value: _vm.form.phone_number,\n          callback: function($$v) {\n            _vm.$set(_vm.form, \"phone_number\", $$v)\n          },\n          expression: \"form.phone_number\"\n        }\n      }),\n      !_vm.user.phone_confirmation_sent_at && _vm.form.phone_number.length\n        ? _c(\n            \"div\",\n            { staticClass: \"text-right\" },\n            [\n              _c(\n                \"b-button\",\n                {\n                  staticClass: \"mt-2 ml-auto\",\n                  class: { loading: _vm.loading },\n                  attrs: { size: \"sm\", variant: \"outline-primary\" },\n                  on: { click: _vm.sendPhoneConfirmationCode }\n                },\n                [_vm._v(\"Send verification code by SMS\")]\n              )\n            ],\n            1\n          )\n        : _vm._e(),\n      _vm.user.phone_confirmation_sent_at &&\n      _vm.form.phone_number.length &&\n      !_vm.user.phone_confirmed_at\n        ? _c(\"div\", { staticClass: \"is-flex mt-2 valign\" }, [\n            _c(\"label\", { staticClass: \"classic has-fg-1 text-right mr-3\" }, [\n              _vm._v(\"Please enter the code\")\n            ]),\n            _c(\"div\", { staticClass: \"input-group d-inline-flex w-50\" }, [\n              _c(\"input\", {\n                directives: [\n                  {\n                    name: \"model\",\n                    rawName: \"v-model\",\n                    value: _vm.form.phone_confirmation_code,\n                    expression: \"form.phone_confirmation_code\"\n                  }\n                ],\n                staticClass: \"form-control\",\n                attrs: { type: \"text\", placeholder: \"123456\" },\n                domProps: { value: _vm.form.phone_confirmation_code },\n                on: {\n                  input: function($event) {\n                    if ($event.target.composing) {\n                      return\n                    }\n                    _vm.$set(\n                      _vm.form,\n                      \"phone_confirmation_code\",\n                      $event.target.value\n                    )\n                  }\n                }\n              }),\n              _c(\n                \"div\",\n                { staticClass: \"input-group-append\" },\n                [\n                  _c(\n                    \"b-button\",\n                    {\n                      class: { loading: _vm.loading },\n                      attrs: { size: \"sm\", variant: \"primary\" },\n                      on: { click: _vm.confirmCode }\n                    },\n                    [_vm._v(\"Send\")]\n                  )\n                ],\n                1\n              )\n            ])\n          ])\n        : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACvCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsCA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AA3BA;AAtBA;;;;;;;;;;;ACzCA;AACA;AACA;AACA;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}