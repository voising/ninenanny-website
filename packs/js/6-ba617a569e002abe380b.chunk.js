(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{348:function(e,t,n){},382:function(e,t,n){"use strict";var o=n(348);n.n(o).a},396:function(e,t,n){},397:function(e,t,n){},398:function(e,t,n){},400:function(e,t,n){"use strict";var o=n(5),i=n(6);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={name:"PhoneNumberVerification",props:["value"],data:function(){return{form:{phone_number:"",phone_country_code:"",phone_confirmation_code:""},loading:!1}},computed:Object(i.c)(["user"]),mounted:function(){this.form={phone_number:this.value||"",phone_country_code:this.user.phone_country_code,phone_confirmation_code:""}},methods:s({},Object(i.b)(["setUser","updateUser"]),{confirmCode:function(){var e=this;this.loading=!0,o.l.phoneConfirm({},{code:this.form.phone_confirmation_code}).then((function(t){e.setUser(t.body.data.attributes),e.$toast.success("All good! Your phone number is verified"),e.loading=!1}))},sendPhoneConfirmationCode:function(){var e=this;this.loading=!0,this.updateUser(s({},this.user,{phone_number:this.form.phone_number,phone_country_code:this.form.phone_country_code})).then((function(t){o.l.phoneConfirmationCode().then((function(t){e.setUser(t.body.data.attributes),e.loading=!1}))}))},updateCountry:function(e){var t=e.countryCode;this.phone_country_code=t}})},u=(n(382),n(3)),l=Object(u.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui--phone-number-verification"},[n("vue-phone-number-input",{attrs:{"default-country-code":e.user.phone_country_code||"HU"},on:{input:function(t){return e.$emit("input",e.form.phone_number)},update:e.updateCountry},model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}}),!e.user.phone_confirmation_sent_at&&e.form.phone_number.length?n("div",{staticClass:"text-right"},[n("b-button",{staticClass:"mt-2 ml-auto",class:{loading:e.loading},attrs:{size:"sm",variant:"outline-primary"},on:{click:e.sendPhoneConfirmationCode}},[e._v("Send verification code by SMS")])],1):e._e(),e.user.phone_confirmation_sent_at&&e.form.phone_number.length&&!e.user.phone_confirmed_at?n("div",{staticClass:"is-flex mt-2 valign"},[n("label",{staticClass:"classic has-fg-1 text-right mr-3"},[e._v("Please enter the code")]),n("div",{staticClass:"input-group d-inline-flex w-50"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.phone_confirmation_code,expression:"form.phone_confirmation_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"123456"},domProps:{value:e.form.phone_confirmation_code},on:{input:function(t){t.target.composing||e.$set(e.form,"phone_confirmation_code",t.target.value)}}}),n("div",{staticClass:"input-group-append"},[n("b-button",{class:{loading:e.loading},attrs:{size:"sm",variant:"primary"},on:{click:e.confirmCode}},[e._v("Send")])],1)])]):e._e()],1)}),[],!1,null,null,null);t.a=l.exports},431:function(e,t,n){"use strict";var o=n(396);n.n(o).a},432:function(e,t,n){"use strict";var o=n(397);n.n(o).a},433:function(e,t,n){"use strict";var o=n(398);n.n(o).a},437:function(e,t,n){"use strict";n.r(t);var o=n(6),i={name:"Steps",components:{},props:["step"],data:function(){return{loading:!0}},computed:Object(o.c)([]),mounted:function(){},methods:Object(o.b)([])},r=(n(431),n(3)),s=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui--steps"},[n("div",{staticClass:"header is-flex"},[n("div",{staticClass:"circle",class:{active:e.step>=0,highlight:e.step>0}},[n("i",{staticClass:"mdi"},[e._v("smartphone")])]),n("div",{staticClass:"circle",class:{active:e.step>=1,highlight:e.step>1}},[n("i",{staticClass:"mdi"},[e._v("contacts")])]),n("div",{staticClass:"circle",class:{active:e.step>=2,highlight:e.step>2}},[n("i",{staticClass:"mdi"},[e._v("fingerprint")])]),n("div",{staticClass:"circle",class:{active:3==e.step}},[n("i",{staticClass:"mdi"},[e._v("done")])])])])}),[],!1,null,null,null).exports,a=n(400);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={name:"FileDropzone",components:{},props:[],data:function(){return{dragging:!1,uploading:!1,isLoading:!1}},computed:u({},Object(o.c)(["attachments","user"]),{basename:function(){var e=this.attachments[0].document.url,t=new String(e).substring(e.lastIndexOf("/")+1);return-1!=t.lastIndexOf(".")&&(t=t.substring(0,t.lastIndexOf("."))),t}}),mounted:function(){},methods:u({},Object(o.b)(["saveAttachment"]),{onDrop:function(e){var t=this,n=e.dataTransfer;this.uploading=!0,this.saveAttachment({file:n.files[0],model_id:this.user.id,model_type:"User"}).then((function(e){t.uploading=!1,t.resetUploadingUi(),t.$emit("file-uploaded")}),(function(e){t.$toast.error("The file sent couldn't be processed. Please make sure you send a PDF file."),t.resetUploadingUi()}))},resetUploadingUi:function(){this.dragging=!1,this.uploading=!1}})};n(432);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={name:"Verifications",components:{FileDropzone:Object(r.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui--file-dropzone"},[n("div",{staticClass:"main-file valign"},[e.attachments[0]?e._e():n("div",{staticClass:"dropzone text-grey px-5",class:{"dropzone--hover":e.dragging,isLoading:e.uploading},on:{dragenter:function(t){t.stopPropagation(),t.preventDefault(),e.dragging=!0},dragover:function(e){e.stopPropagation(),e.preventDefault()},dragleave:function(t){t.stopPropagation(),t.preventDefault(),e.dragging=!1},drop:function(t){return t.stopPropagation(),t.preventDefault(),e.onDrop(t)}}},[e._v("DRAG & DROP YOUR PDF DOCUMENT HERE...")]),e.attachments[0]&&e.attachments[0].document?n("a",{staticClass:"file",attrs:{target:"_blank",href:e.attachments[0].document.url}},[n("i",{staticClass:"mdi is-size-1"},[e._v("attachment")]),n("p",[e._v(e._s(e.basename))])]):e._e()])])}),[],!1,null,null,null).exports,PhoneNumberVerification:a.a,Steps:s},props:[],data:function(){return{loading:!1,form:{phone_number:null},documentValidated:!1}},computed:f({},Object(o.c)(["user","attachments"]),{step:function(){return this.user.phone_confirmed_at?this.document?"pending"==this.user.verification_status?2:3:1:0},document:function(){return this.attachments.find((function(e){return e.document}))}}),created:function(){this.getAttachments({model_type:"User",model_id:this.user.id})},mounted:function(){this.form.phone_number=this.user.phone_number},methods:f({},Object(o.b)(["getAttachments","updateUser","setUser"]),{fileUploadSuccess:function(){this.$toast.success("We will check your document and reach back to you ASAP")},confirmBooking:function(){var e=this;this.loading=!0,this.updateUser(f({},this.user,{verification_status:"call_booked"})).then((function(t){e.setUser(t.body.data.attributes),e.false=!0}))}})},v=(n(433),Object(r.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"verfications fullheight is-flex valign flex-column"},[n("h1",{staticClass:"h2 is-size-2 text-center d-block"},[e._v("Verifications")]),n("p",{staticClass:"is-size-6"},[e._v("Gain more visibility by verifying your account")]),n("steps",{attrs:{step:e.step}}),n("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[0==e.step?n("div",{key:"phone_number",staticClass:"card shadow rounded p-5 mt-4"},[n("div",{staticClass:"form-group has-text-left"},[n("p",[e._v("Please enter your phone number")]),n("phone-number-verification",{model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}})],1)]):e._e(),1==e.step?n("div",{key:"phone_number",staticClass:"card shadow rounded p-5 mt-4"},[n("div",{staticClass:"form-group has-text-left"},[n("file-dropzone",{on:{"file-upload":e.fileUploadSuccess}})],1)]):e._e(),2==e.step?n("div",{key:"phone_number"},[n("div",{staticClass:"card shadow rounded mt-4 position-relative"},[n("div",{staticClass:"instructions"},[n("p",{staticClass:"m-0 h4 text-dark"},[e._v("ID verification")]),n("small",{staticClass:"is-size-7"},[e._v("Book a Whatsapp video call to verify your ID")])]),n("iframe",{attrs:{src:"https://calendly.com/guillaume-voisin/30min?name="+e.user.first_name+"&email="+e.user.email}})]),n("div",{staticClass:"text-right mt-3"},[n("b-button",{class:{loading:e.loading},attrs:{variant:"primary"},on:{click:e.confirmBooking}},[e._v("Next")])],1)]):e._e(),3==e.step?n("div",{key:"all_good",staticClass:"card shadow rounded p-5 mt-4 card--all-good"},["call_booked"==e.user.verification_status?n("p",{staticClass:"text-success"},[e._v("We're done for now. We will call you to end the verification process."),n("br"),e._v("Make sure to have an ID at hand when we do so.")]):e._e(),"done"==e.user.verification_status?n("p",{staticClass:"text-success"},[e._v("We're all good!")]):e._e()]):e._e()])],1)}),[],!1,null,null,null));t.default=v.exports}}]);